---
title: 问题汇总
author: xinyu
date: 2024-03-13 16:47:23 +0800
categories: []
tags: []
---

## 1. 目录未显示

问题说明：Demo中可以正常显示，但是在项目地址Clone并在本地运行Jekyll serve指令后无法正常显示目录

解决方案：

经过分析发现，问题在于文件中的`_javascript/modules/components/toc.js`{: .filepath}脚本实际上并未执行，经过代码阅读，其在`_javascript/modules/plugins.js`{: .filepath}脚本中，被统一引用，并在`_javascript/post.js`{: .filepath}脚本中被执行。

因此，面临两个问题

- 代码是否被正常调用
- 代码是否正常工作

在`_layouts/default.html`中`<body>`块末尾添加如下代码后功能正常。
```javascript
    {% if enable_toc %}
      <script>
        document.addEventListener('DOMContentLoaded', function () {
          tocbot.init({
            tocSelector: '#toc',
            contentSelector: '.content',
            ignoreSelector: '[data-toc-skip]',
            headingSelector: 'h2, h3, h4',
            orderedList: false,
            scrollSmooth: false
          });
          tocbot.refresh();
        });
      </script>
    {% endif %}
```

## 2. 修改左下角图标显示

问题说明：左下角默认具有推特、feed等图标，但是可能有一些并不使用，以及想添加一些非默认的联系方式

解决方案：

修改`_data/contact.yml`{: .filepath}文件中的代码，示例如下。注释并不使用的联系方式类型，保留所需要的。

```yaml
- type: email
  icon: "fas fa-envelope"
  noblank: true # open link in current tab
  url: # Fill with your homepage
```

对于不在示例中的联系方式的填写，需要填写其中的url，此外其所使用的图标代码来自于Fontawesome(https://fontawesome.com/)网站。
其中一些常用的网站的图标均有，例如其中Bilibili的图标代码则为`fa-brands fa-bilibili`。

## 3. 添加自定义脚注

问题说明：由于图片引用至其它网站，希望。

解决方案：

在`_data/locales/lang.yml`{: .filepath}文件中添加如下代码：
```javascript
  <p>
    {%- capture _ImagesourceURL -%}
      <a href="https://unsplash.com" target="_blank" rel="noopener">unsplash</a>
    {%- endcapture -%}
    {{ site.data.locales[include.lang].ImageSource | replace: ':ImagesourceURL', _ImagesourceURL }}
  </p>
```
在`_include/footer.html`文件中添加如下代码：
```javascript
  <p>
    {%- capture _ImagesourceURL -%}
      <a href="https://unsplash.com" target="_blank" rel="noopener">unsplash</a>
    {%- endcapture -%}
    {{ site.data.locales[include.lang].ImageSource | replace: ':ImagesourceURL', _ImagesourceURL }}
  </p>
```

## 4. 文档更新时间未显示

问题说明：新文档更新时间不显示，示例文档可以正常显示，但复制黏贴一个示例文档的样本，结果为不显示。

测试发现，仅有原文件存在`page.last_modified_at`属性，其它文档均没有该属性，而更新时间是通过输出该属性来显示的，因此对于其它文件而言无法正常显示。

查看`_plugins/posts-lastmod-hook.rb`文件，其代码如下：

```jekyll
Jekyll::Hooks.register :posts, :post_init do |post|

  commit_num = `git rev-list --count HEAD "#{ post.path }"`

  if commit_num.to_i > 1
    lastmod_date = `git log -1 --pretty="%ad" --date=iso "#{ post.path }"`
    post.data['last_modified_at'] = lastmod_date
  end

end
```

其中网站
## 5. 搜索功能以及侧边栏功能无法正常使用

## 6. 其它

- 免费图标素材网站
